<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MATRIXxKINOTO</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>

<style>
body{
    margin:0;
    background:#000;
    font-family:Orbitron;
    color:white;
    overflow-x:hidden;
}

/* ===== INTRO LOGO ===== */
#introLogo{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:70px;
    letter-spacing:8px;
    opacity:.08;
    transition:1.2s;
    pointer-events:none;
}

#introLogo.top{
    top:20px;
    left:50%;
    transform:translateX(-50%);
    font-size:28px;
    opacity:.35;
}

/* ===== SIDEBAR ===== */
#menuBtn{
    position:fixed;
    top:20px;
    left:20px;
    font-size:26px;
    cursor:pointer;
    z-index:999;
}

#sidebar{
    position:fixed;
    left:-260px;
    top:0;
    width:260px;
    height:100%;
    background:#070707;
    border-right:1px solid #ff000055;
    transition:.4s;
    padding:20px;
}

#sidebar.show{ left:0; }

.input{
    width:100%;
    margin-top:10px;
    background:#000;
    border:1px solid red;
    color:white;
    padding:10px;
}

.btn{
    width:100%;
    margin-top:10px;
    padding:10px;
    background:red;
    border:none;
    color:white;
    cursor:pointer;
}

/* ===== POSTS ===== */
#posts{
    max-width:900px;
    margin:120px auto;
}

.post{
    border:1px solid #ff000044;
    box-shadow:0 0 25px #ff000033;
    padding:20px;
    margin-bottom:40px;
    border-radius:14px;
    background:#050505;
}

.post img{
    max-width:100%;
    border-radius:10px;
    margin-top:10px;
}

.name{font-size:12px;opacity:.6}
.title{font-size:26px;margin-top:4px}

.delete{
    margin-top:10px;
    background:black;
    border:1px solid red;
    color:red;
    padding:6px 12px;
    cursor:pointer;
}

/* ===== PARTICLES ===== */
canvas{
    position:fixed;
    top:0;
    left:0;
    z-index:-1;
}

/* ===== FOLLOW CURSOR ===== */
#follower{
    width:18px;
    height:18px;
    border-radius:50%;
    position:fixed;
    pointer-events:none;
    background:red;
    box-shadow:0 0 20px red,0 0 40px red;
    z-index:9999;
}
</style>
</head>

<body>

<canvas id="particles"></canvas>
<div id="follower"></div>

<div id="introLogo">MATRIXxKINOTO</div>

<div id="menuBtn">â˜°</div>

<div id="sidebar">
<h3>Create Post</h3>
<input id="title" class="input" placeholder="Title">
<textarea id="msg" class="input" placeholder="Message"></textarea>
<input type="file" id="img" class="input">
<button class="btn" onclick="createPost()">UPLOAD</button>
</div>

<div id="posts"></div>

<script>
/* ===== FIREBASE CONFIG ===== */
const firebaseConfig = {
 apiKey: "AIzaSyAbV7OHp1-mroEGnprfW4rcddOpVjE9U9k",
  authDomain: "matrixxkinoto-1d31c.firebaseapp.com",
  projectId: "matrixxkinoto-1d31c",
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* ===== USER ===== */
let username = localStorage.getItem("discordName") || "Anonymous";

/* ===== SIDEBAR ===== */
menuBtn.onclick=()=>{
 sidebar.classList.toggle("show");
}

/* ===== INTRO MOVE TO TOP ===== */
setTimeout(()=>{
 introLogo.classList.add("top");
},1800);

/* ===== CREATE POST ===== */
async function createPost(){
let title=document.getElementById("title").value;
let msg=document.getElementById("msg").value;
let file=document.getElementById("img").files[0];

let imageURL="";

if(file){
let data=new FormData();
data.append("file",file);
data.append("upload_preset","matrixpreset");

let res=await fetch("https://api.cloudinary.com/v1_1/dctoowkot/image/upload",{method:"POST",body:data});
let json=await res.json();
imageURL=json.secure_url;
}

await db.collection("posts").add({
title,msg,imageURL,
name:username,
time:Date.now()
});
}

/* ===== LOAD POSTS ===== */
db.collection("posts").orderBy("time","desc")
.onSnapshot(snap=>{
posts.innerHTML="";
snap.forEach(doc=>{
let p=doc.data();

let div=document.createElement("div");
div.className="post";

div.innerHTML=`
<div class=name>${p.name}</div>
<div class=title>${p.title||""}</div>
<div>${p.msg||""}</div>
${p.imageURL?`<img src="${p.imageURL}">`:""}
${p.name===username?`<button class=delete onclick="del('${doc.id}')">DELETE</button>`:""}
`;

posts.appendChild(div);
});
});

/* delete */
function del(id){
db.collection("posts").doc(id).delete();
}

/* ===== PARTICLES ===== */
let c=document.getElementById("particles");
let ctx=c.getContext("2d");
c.width=innerWidth;
c.height=innerHeight;
let pts=[];
for(let i=0;i<80;i++){
pts.push({x:Math.random()*c.width,y:Math.random()*c.height,vx:.4-Math.random(),vy:.4-Math.random()});
}
function draw(){
ctx.clearRect(0,0,c.width,c.height);
pts.forEach(p=>{
p.x+=p.vx;p.y+=p.vy;
ctx.fillStyle="red";
ctx.fillRect(p.x,p.y,2,2);
pts.forEach(p2=>{
let d=Math.hypot(p.x-p2.x,p.y-p2.y);
if(d<120){
ctx.strokeStyle="rgba(255,0,0,.15)";
ctx.beginPath();
ctx.moveTo(p.x,p.y);
ctx.lineTo(p2.x,p2.y);
ctx.stroke();
}
});
});
requestAnimationFrame(draw);
}
draw();

/* ===== SMOOTH FOLLOW CURSOR ===== */
let fx=0,fy=0,tx=0,ty=0;
document.addEventListener("mousemove",e=>{
tx=e.clientX;
ty=e.clientY;
});
function anim(){
fx+=(tx-fx)*0.15;
fy+=(ty-fy)*0.15;
follower.style.left=fx+"px";
follower.style.top=fy+"px";
requestAnimationFrame(anim);
}
anim();
</script>

</body>
</html>
